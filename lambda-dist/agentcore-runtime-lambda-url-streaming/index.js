"use strict";var i=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var l=Object.getOwnPropertyNames;var y=Object.prototype.hasOwnProperty;var w=(e,n)=>{for(var o in n)i(e,o,{get:n[o],enumerable:!0})},R=(e,n,o,t)=>{if(n&&typeof n=="object"||typeof n=="function")for(let r of l(n))!y.call(e,r)&&r!==o&&i(e,r,{get:()=>n[r],enumerable:!(t=f(n,r))||t.enumerable});return e};var g=e=>R(i({},"__esModule",{value:!0}),e);var N={};w(N,{handler:()=>I});module.exports=g(N);var s=require("@aws-sdk/client-bedrock-agentcore"),a=require("crypto"),m=require("node:stream/promises"),p=require("node:stream"),A=new s.BedrockAgentCoreClient,I=awslambda.streamifyResponse(async(e,n)=>{try{let o=JSON.parse(e.body||"{}"),t=o.prompt||"Hello",r=o.session_id||(0,a.randomUUID)(),d=new s.InvokeAgentRuntimeCommand({agentRuntimeArn:process.env.ACORE_RUNTIME_ARN,runtimeSessionId:r,payload:Buffer.from(JSON.stringify({prompt:t}))}),c=await A.send(d);await(0,m.pipeline)(p.Readable.from(c.response),n)}catch(o){n.write(JSON.stringify({error:o.message||"Unknown error",type:o.name||"Error"}))}finally{n.end()}});0&&(module.exports={handler});
//# sourceMappingURL=index.js.map
